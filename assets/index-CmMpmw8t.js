(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerPolicy&&(e.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?e.credentials="include":o.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(o){if(o.ep)return;o.ep=!0;const e=t(o);fetch(o.href,e)}})();const D=[{id:"name",type:"text",label:"Full Name",required:!0,validation:{pattern:"^[a-zA-Z\\s]{2,50}$"}},{id:"age",type:"number",label:"Age",validation:{min:18,max:100}},{id:"role",type:"select",label:"Role",validation:{options:["Developer","Designer","Manager"]},required:!0},{id:"address",label:"Address",type:"group",fields:[{id:"street",type:"text",label:"Street",required:!0},{id:"city",type:"text",label:"City",required:!0},{id:"zip",type:"number",label:"Zip Code",required:!0}]}],$={fields:D};function u(s,n){const t=s.parentElement;let l=t==null?void 0:t.querySelector(".error-message");s.validity.valid?(l&&l.remove(),s.style.borderColor=""):l||(l=document.createElement("div"),l.className="error-message",t==null||t.appendChild(l)),l&&(l.textContent=n,s.style.borderColor="red")}function q(s){const n=s.parentElement,t=n==null?void 0:n.querySelector(".error-message");t&&t.remove(),s.style.borderColor=""}function N(s){var C,g,E,h;const{type:n,required:t,label:l,defaultValue:o,validation:e,id:r,fields:i}=s;let c=null;if(n==="group"){const a=document.createElement("fieldset"),y=document.createElement("legend");return y.textContent=l,a.appendChild(y),i==null||i.forEach(b=>{const m=N(b);a.appendChild(m)}),a}switch(n){case"text":case"number":case"email":c=document.createElement("input");const a=c;a.type=n,a.required=t||!1,a.placeholder=l,c.addEventListener("input",()=>{t&&!a.value?u(a,`${s.label} is required.`):q(a)}),o!==void 0&&(a.defaultValue=o.toString()),e!=null&&e.pattern&&(a.pattern=e.pattern,c.addEventListener("input",()=>{u(a,"Please match the requested format")})),e!=null&&e.min&&(a.min=e.min.toString(),c.addEventListener("input",()=>{var p,I;const m=`Please insert a number that is between ${(p=s.validation)==null?void 0:p.min} and ${(I=s.validation)==null?void 0:I.max}`;u(a,m)})),(C=s.validation)!=null&&C.max&&(a.max=s.validation.max.toString());break;case"select":c=document.createElement("select");const y=c;y.required=t||!1,(g=e==null?void 0:e.options)==null||g.forEach(m=>{const p=document.createElement("option");p.value=m,p.textContent=m,y.appendChild(p)}),c.addEventListener("change",()=>{q(c)});break;case"checkbox":c=document.createElement("input"),c.type=n,c.required=t||!1;break;default:const b=document.createElement("div");b.className="input-type-error-message",b.textContent=`Not expected input type: ${s.type}`,(E=document.getElementById("form-container"))==null||E.appendChild(b);break}if(!c){const a=document.createElement("h1");throw a.textContent=`Unable to create input element for field type: ${n}`,a.style.color="red",(h=document.getElementById("app"))==null||h.appendChild(a),new Error(`Unable to create input element for field type: ${n}`)}c.id=r;const d=document.createElement("label");d.htmlFor=r,d.textContent=l+":";const f=document.createElement("div");return f.appendChild(d),f.appendChild(c),f}function F(s,n){s.preventDefault();let t=!0;if(n.forEach(({id:l,required:o,label:e,validation:r})=>{const i=document.getElementById(l);i&&(o&&!i.value?(u(i,`${e} is required.`),t=!1):r!=null&&r.pattern&&!new RegExp(r.pattern).test(i.value)?u(i,`Please match the requested format for ${e}.`):r!=null&&r.min&&parseFloat(i.value)<r.min?(u(i,`${e} should be at least ${r.min}.`),t=!1):r!=null&&r.max&&parseFloat(i.value)>r.max?(u(i,`${e} should be at most ${r.max}.`),t=!1):q(i))}),t){const l=B(n);console.log("Form submitted:",l)}}function B(s){const n={};return s.forEach(({id:t,type:l,fields:o})=>{const e=document.getElementById(t);l==="group"&&o?n[t]=B(o):e&&(l==="checkbox"?n[t]=e.checked:n[t]=e.value)}),n}const O=$.fields;function M(){O.forEach(({id:s,type:n,fields:t})=>{const l=localStorage.getItem(s);if(l&&n==="group"&&t){const o=JSON.parse(l);t.forEach(({id:e})=>{const r=document.getElementById(e);r&&o[e]&&(r.value=o[e])})}else if(l){const o=document.getElementById(s);o&&(n==="checkbox"&&(o.checked=JSON.parse(l)),o.value=l)}})}const x=$.fields;let v=!0,L=null;document.addEventListener("DOMContentLoaded",()=>{const s=document.getElementById("app");if(s){if(v){const n=document.createElement("h1");n.textContent="Loading...",n.id="loading",s.appendChild(n)}else S(s);setTimeout(()=>{if(Math.random()<.2){L="Failed to load the form. Please try again later.",v=!1,S(s);return}else v=!1,S(s)},2e3)}});function S(s){const n=document.getElementById("loading");if(n&&n.remove(),L){const r=document.createElement("h1");r.className="error-message",r.textContent=L,s.appendChild(r);return}const t=document.createElement("form");t.className="form-container",t.id="form-container",x.forEach(r=>{const i=N(r);t.appendChild(i);const{id:c,type:d,fields:f}=r;i.addEventListener("input",C=>{const g=C.target;if(d==="group"&&f){const E={};f.forEach(({id:h})=>{const a=document.getElementById(h);a&&(E[h]=a.value)}),localStorage.setItem(c,JSON.stringify(E))}else d==="checkbox"?localStorage.setItem(c,g.checked.toString()):localStorage.setItem(c,g.value)})});const l=document.createElement("div");l.className="form-buttons";const o=document.createElement("button");o.type="submit",o.textContent="Submit";const e=document.createElement("button");e.type="reset",e.textContent="Reset",e.addEventListener("click",()=>{x.forEach(({id:r,type:i,fields:c})=>{localStorage.removeItem(r),i==="group"&&c&&c.forEach(({id:d})=>{localStorage.removeItem(d)})})}),l.appendChild(o),l.appendChild(e),t.appendChild(l),t.addEventListener("submit",r=>F(r,x)),s.appendChild(t),M()}
